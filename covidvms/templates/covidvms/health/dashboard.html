{% extends 'covidvms/base.html'%}

{% block content %}

{% load static %}

        <div class="row">
            <div class="col-md-12 col-lg-6 col-xl-6">
                <h4>Chart generated by Matplotlib</h4>
                {{graph1|safe}}
            </div>
            <div class="col-md-12 col-lg-6 col-xl-6">
                <h4>Chart generated by Chart.js</h4> <br/>
                <div id="container" style="width: 75%;">
                    <canvas id="vaccination-chart" data-url="{% url 'covidvms:vaccination_chart' %}"></canvas>
                  </div>
            </div>



        </div>
<script>
    $(document).ready(()=>{
        var $vaccinationChart = $("#vaccination-chart");
        $.ajax({
            type: 'GET',
            url: $vaccinationChart.data("url"),
            success: (data) =>{

            var ctx = $vaccinationChart
            //console.log(data)
            new Chart(ctx, {
                type: 'bar',
                data: {
                labels: data.labels,
                datasets: [{
                    label: 'Vaccinated Population',
                    data: data.data,
                    backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(255, 159, 64, 0.2)',
                    'rgba(255, 205, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    'rgba(201, 203, 207, 0.2)'
                ],
                borderColor: [
                    'rgb(255, 99, 132)',
                    'rgb(255, 159, 64)',
                    'rgb(255, 205, 86)',
                    'rgb(75, 192, 192)',
                    'rgb(54, 162, 235)',
                    'rgb(153, 102, 255)',
                    'rgb(201, 203, 207)',
                    'rgb(202, 205, 209)'
                ],
                borderWidth: 1
                }]          
                },
                options: {
                responsive: true,
                y: {
                    beginAtZero: true
                },
                legend: {
                    position: 'top',
                },
                title: {
                    display: true,
                    text: 'Vaccination Population Bar Chart'
                },

                }
            });

        }
      });
    });


</script>

{% endblock %}